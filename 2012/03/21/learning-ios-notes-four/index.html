<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS笔记 (4) | 萧宸宇</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="og:type" content="blog">
<meta name="og:title" content="iOS笔记 (4)">
<meta name="og:url" content="http://iiiyu.com/2012/03/21/learning-ios-notes-four/">
<meta name="og:image" content="http://farm8.staticflickr.com/7252/6856181868_05dbe1fd8f.jpg">
<meta name="og:site_name" content="萧宸宇">
<meta name="og:description" content="iOS笔记——九宫解锁基础部分
目的
为了第一个App，一步一步的做出来。所以先弄最基本的想做一个类似Android九宫解锁的View。一开始完全没有思路啊。后来看了好几遍老头的画笑脸以后才有点思路。所以来一步一步做吧。


继续扯淡MVC
作为一个从iOS5开始学起开发的娃来说，什么nib xib文件都是浮云。哥只懂在Xcode里面的storyboard里面拖拖拽拽。奈何没几个代码实例是Stor">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="萧宸宇" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29764460-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">萧宸宇</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">如果不能成为拯救世界的神，那就堕落到征服世界的魔吧。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about-me">About me</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://iiiyu.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-learning-ios-notes-four" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2012/03/21/learning-ios-notes-four/" class="article-date">
  <time datetime="2012-03-21T05:38:00.000Z" itemprop="datePublished">3月 21 2012</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS笔记 (4)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="iOS笔记——九宫解锁基础部分">iOS笔记——九宫解锁基础部分</h1>
<h2 id="目的">目的</h2>
<p>为了第一个App，一步一步的做出来。所以先弄最基本的想做一个类似Android九宫解锁的View。一开始完全没有思路啊。后来看了好几遍老头的画笑脸以后才有点思路。所以来一步一步做吧。</p>
<a id="more"></a>

<h2 id="继续扯淡MVC">继续扯淡MVC</h2>
<p>作为一个从iOS5开始学起开发的娃来说，什么nib xib文件都是浮云。哥只懂在Xcode里面的storyboard里面拖拖拽拽。奈何没几个代码实例是Storyboard写的。让想重用代码的我，无法直接⌘-c ⌘-v。很是郁闷哈。不过经过慢慢理解，对于Xcode4里面用stroyboard有了一些小小的心得。分享一下。</p>
<p>一个VC是怎么构成的。在新建工程storyboard里面，我新拖入一个view<br>如图</p>
<p><img src="http://farm8.staticflickr.com/7252/6856181868_05dbe1fd8f.jpg" alt="storyboard1"></p>
<p>这是此时，这个仅仅是一个无人管的一段xml而已。因为你的程序里面没有相应的类去接管这个view。就像一个没人要的狗腿子。好可怜的。你需要把他找一个C的主子管着他，让view知道他应该怎么显示什么东西，对发生的事情做出什么样的反应。</p>
<ul>
<li><p>首先，你至少已经建立了接管这个view的controller类。</p>
</li>
<li><p>接着点击你view的这里</p>
</li>
</ul>
<p><img src="http://farm7.staticflickr.com/6222/7002295489_c0ea10a055_s.jpg" alt="storyboard2"></p>
<ul>
<li>从右侧选择你看见的这里的class的下拉框，选中你的controller</li>
</ul>
<p><img src="http://farm8.staticflickr.com/7240/6856181962_678f0eb0c4.jpg" alt="storyboard3"></p>
<p>有时候拖出来的view，并不能够满足你的需求。你可能会写一个subclass继承UIview来进行扩展。你也需要指定你拖出来的view他本身指向这个subview。</p>
<p>这是跟刚刚大同小异</p>
<ul>
<li><p>首先，你至少已经建立了这个继承UIView的view类。</p>
</li>
<li><p>接着点击你view的这里</p>
</li>
</ul>
<p><img src="http://farm7.staticflickr.com/6058/7002295577_c22eb920e6.jpg" alt="storyboard4"></p>
<ul>
<li>从右侧选择你看见的这里的class的下拉框，选中你的controller</li>
</ul>
<p><img src="http://farm8.staticflickr.com/7075/7002295599_3c2b3a65ea.jpg" alt="storyboard5"></p>
<p>这样你就完成了一对VC的创建了。</p>
<h2 id="程序基本要做的事情">程序基本要做的事情</h2>
<ul>
<li>有一个view，view上有背景色</li>
<li>view上画9个按钮</li>
<li>view上能画线</li>
<li>controller能控制手指开始的地方，移动的地方，结束的地方。</li>
</ul>
<h2 id="一步一步">一步一步</h2>
<h3 id="clone工程">clone工程</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>git <span class="keyword">clone</span> git:<span class="comment">//github.com/iiiyu/Draw-Lock-Login.git</span>
</pre></td></tr></table></figure>

<p>项目结构</p>
<p><img src="http://farm7.staticflickr.com/6037/7002295643_06f72a4961.jpg" alt="ios4-1"></p>
<h3 id="Draw_Lock类分析(UIView)">Draw_Lock类分析(UIView)</h3>
<p>点开Draw_Lock.m可以看到<br>两个方法,其中一个还是注释掉的。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>- (<span class="keyword">id</span>)initWithFrame:(<span class="built_in">CGRect</span>)frame
{
    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];
    <span class="keyword">if</span> (<span class="keyword">self</span>) {
        <span class="comment">// Initialization code</span>
    }
    <span class="keyword">return</span> <span class="keyword">self</span>;
}

<span class="comment">// Only override drawRect: if you perform custom drawing.</span>
<span class="comment">// An empty implementation adversely affects performance during animation.</span>
- (<span class="keyword">void</span>)drawRect:(<span class="built_in">CGRect</span>)rect
{

}
</pre></td></tr></table></figure>

<p>initWithFrame虽然看起来像初始化函数的样子，但是如果我们想初始化做一些事情的时候。是要重新写一个函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="comment">// 老头说过不直接调用initWithFrame 而是调用awakeFromNib来进行初始化</span>
<span class="comment">// 进过测试 initWithFrame也不会被调用</span>
- (<span class="keyword">void</span>)awakeFromNib
{
    
}
</pre></td></tr></table></figure>

<p>如果需要初始化做一些事情，请重载awakeFromNib。</p>
<p>drawRect函数一开始是被注释掉。但是此函数可以在view上进行绘画。关于Quartz请参考相关官方文档。</p>
<p>仅仅记录我觉得重要的地方。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>// 这个<span class="keyword">context</span>就是画布，官方叫上下文。每次作画前要有。
CGContextRef <span class="keyword">context</span> = UIGraphicsGetCurrentContext();
</pre></td></tr></table></figure>

<p>一开始我不会设置view的背景，就想把画一个和view相等的矩形。这样不就是背景了。后来发现是可以直接设置的。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="comment">// 设置view的背景颜色</span>
<span class="keyword">self</span><span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> darkGrayColor];
</pre></td></tr></table></figure>

<p>把要加入的9个宫。看做一个个的view。我们先创建这些view。然后用addSubview加入Draw_Lock这个view当中，最后调整这些宫的位置就完成了图像的绘制。</p>
<p>每一个宫由两张图片构成。一张为默认，一张为highlighted属性的。当我们碰到宫时候，设置他的highlighted为YES。</p>
<p>然后是线的绘制。当手指触碰到宫的时候，才吧宫的中心作为起点开始绘制线。绘制的线在没有遇到第二个宫的时候跟随手指，如果遇到宫。就绘制完成一条直线。然后把终点的坐标为下一条线的起点。直到手指离开屏幕。</p>
<h3 id="ViewController类分析（UIViewController）">ViewController类分析（UIViewController）</h3>
<p>手指触摸开始</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="pp">- <span class="params">(void)</span>touchesBegan:<span class="params">(<span class="variable">NSSet</span> *)</span>touches withEvent:<span class="params">(<span class="variable">UIEvent</span> *)</span>event
{

}</span>
</pre></td></tr></table></figure>

<p>手指移动</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="pp">- <span class="params">(void)</span>touchesMoved:<span class="params">(<span class="variable">NSSet</span> *)</span>touches withEvent:<span class="params">(<span class="variable">UIEvent</span> *)</span>event
{
    
}</span>
</pre></td></tr></table></figure>

<p>触摸结束</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="pp">- <span class="params">(void)</span>touchesEnded:<span class="params">(<span class="variable">NSSet</span> *)</span>touches withEvent:<span class="params">(<span class="variable">UIEvent</span> *)</span>event
{
    
}</span>
</pre></td></tr></table></figure>

<h3 id="最后">最后</h3>
<p>大概在山寨这个九宫的时候就遇到很多问题。隔了一天，能想到一一记录。当然，还有更多的问题。所以最好就直接看github项目里面有更详细的注释和完整的代码。很多时候，觉得写代码比写blog轻松多了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://iiiyu.com/2012/03/21/learning-ios-notes-four/" data-id="dmb5dx57742mn2lt" class="article-share-link">Share</a>
      
        <a href="http://iiiyu.com/2012/03/21/learning-ios-notes-four/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2012/03/25/ioscon-guangzhou/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          iOScon 广州之行
        
      </div>
    </a>
  
  
    <a href="/2012/03/14/talk-about-the-software/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">谈谈软件的一些事</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/03/25/learn-ui-design-one/">学习UI设计笔记(一)</a>
          </li>
        
          <li>
            <a href="/2014/03/19/learning-ios-notes-thirty-four/">iOS笔记(34) 格志周年系列之夏令时(二)</a>
          </li>
        
          <li>
            <a href="/2014/03/18/learning-ios-notes-thirty-three/">iOS笔记(33) 格志周年系列之夏令时(一)</a>
          </li>
        
          <li>
            <a href="/2014/01/08/read-jony-ive/">读 Jony Ive: The Genius Behind Apple&#39;s Greatest Products 笔记</a>
          </li>
        
          <li>
            <a href="/2013/12/31/2013-annual-summary/">2013年度总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design/">Design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Emacs/">Emacs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Software/">Software</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">36</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/just-talk/">just-talk</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/read book notes/">read book notes</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Design/" style="font-size: 10.00px;">Design</a><a href="/tags/Emacs/" style="font-size: 15.00px;">Emacs</a><a href="/tags/Mac/" style="font-size: 10.00px;">Mac</a><a href="/tags/Software/" style="font-size: 12.50px;">Software</a><a href="/tags/iOS/" style="font-size: 20.00px;">iOS</a><a href="/tags/just-talk/" style="font-size: 17.50px;">just-talk</a><a href="/tags/read book notes/" style="font-size: 15.00px;">read book notes</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03">三月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01">一月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12">十二月 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10">十月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09">九月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08">八月 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06">六月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05">五月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04">四月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03">三月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02">二月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01">一月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12">十二月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11">十一月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10">十月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09">九月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08">八月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07">七月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05">五月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04">四月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03">三月 2012</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02">二月 2012</a><span class="archive-list-count">9</span></li></ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 萧宸宇<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about-me" class="mobile-nav-link">About me</a>
  
</nav>
    
<script>
  var disqus_shortname = 'iiiyu';
  
  var disqus_url = 'http://iiiyu.com/2012/03/21/learning-ios-notes-four/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script type="text/javascript" src="/js/script.js"></script>
  </div>
</body>
</html>