<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS笔记 (14) | 萧宸宇</title>
  <meta name="author" content="萧宸宇">
  
  <meta name="description" content="fuck">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="iOS笔记 (14)"/>
  <meta property="og:site_name" content="萧宸宇"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="萧宸宇" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29764460-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">萧宸宇</a></h1>
  <h2><a href="/">如果不能成为拯救世界的神，那就堕落到征服世界的魔吧。</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about-me">关于我</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-10-25T23:42:00.000Z"><a href="/2012/10/26/learning-ios-notes-fourteen/">10月 26 2012</a></time>
      
      
  
    <h1 class="title">iOS笔记 (14)</h1>
  

    </header>
    <div class="entry">
      
        <h1>使用CocoaPods</h1>
<h2>序</h2>
<p>在iOS开发中，经常性的引用第三方开源的库。github上大量的库为我们开发iOS提供了强大丰富多样的资源。从新手一直过来的我们，面对使用越来越多的第三方库。手足无措。CocoaPods的出现使得一切变得Hacker起来。使用CocoaPods一定会让每次copy文件到项目的你喜极而泣的。</p>
<a id="more"></a>

<h2>之前的方式</h2>
<p>在使用CocoaPods一般情况下是这样应用第三方库的。</p>
<ol>
<li>人工copy —— 为了使用，首先用git clone到某个目录。然后自己手动copy到自己的项目里面。(之前的大部分时间里面我都是这么干的)缺点: 跟原来的版本控制失去联系，如果库有升级，你需要从头来一次才能进行升级。然后自己的项目也会顺带管理这些代码，显得臃肿。</li>
<li>在尝试很多次人工copy以后，发现一些github上的第三方库使用git submodule来进行第三方库的版本管理。具体使用方法参考<a href="http://josephjiang.com/entry.php?id=342" target="_blank">这里</a>.这样我的第三方库也能保持更新而不用重新进行人工copy。缺点是，每次使用的时候我都需要打一堆我记不住的命令和打开浏览器查找第三方库的git地址。</li>
</ol>
<h2>什么是CocoaPods</h2>
<p><a href="http://cocoapods.org" target="_blank">CocoaPods</a>是Objective-C项目中最好用的第三方依赖包管理工具。只要安装好CocoaPods，在自己的iOS项目路径下建立一份Podfile配置文件，在里面说明要使用哪些第三方库，CocoaPods就会帮忙你搞定所有第三方库的相依性，从clone第三方库甚至到设定好Xcode的项目设置，一切都相当的轻松愉快。你能想像这些工作都是CocoaPods帮我们做好了。</p>
<p><a href="http://www.cocoapods.org/" target="_blank">官网</a></p>
<p><a href="https://github.com/CocoaPods/CocoaPods" target="_blank">项目地址</a></p>
<h2>Get Started</h2>
<p>CocoaPods 是一个 Ruby 的 Gem，所以只要在 Terminal 下输入一下就ok了。(因为os x自带了ruby，但是如果你要升级ruby这是另外一个事情了)</p>
<h3>安装</h3>
<figure class="highlight lang-sh"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="variable">$ </span>[sudo] gem install cocoapods
<span class="variable">$ </span>pod setup
</pre></td></tr></table></figure>

<h3>搜索</h3>
<p>我们可以用cocoapods来先看看有没有我们需要添加的第三方库</p>
<p>比如我们想用一个json库</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="code"><pre><span class="comment">pod</span> <span class="comment">search</span> <span class="comment">json</span>                                                                                                                                   

<span class="literal">-</span>&gt; <span class="comment">AnyJSON</span> <span class="comment">(0</span>.<span class="comment">0</span>.<span class="comment">1)</span>
   <span class="comment">Encode</span> <span class="comment">/</span> <span class="comment">Decode</span> <span class="comment">JSON</span> <span class="comment">by</span> <span class="comment">any</span> <span class="comment">means</span> <span class="comment">possible</span>.
   <span class="literal">-</span> <span class="comment">Homepage:</span> <span class="comment">https://github</span>.<span class="comment">com/mattt/AnyJSON</span>
   <span class="literal">-</span> <span class="comment">Source:</span>   <span class="comment">https://github</span>.<span class="comment">com/mattt/AnyJSON</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Versions:</span> <span class="comment">0</span>.<span class="comment">0</span>.<span class="comment">1</span> <span class="title">[</span><span class="comment">master</span> <span class="comment">repo</span>]


<span class="literal">-</span>&gt; <span class="comment">JSONKit</span> <span class="comment">(1</span>.<span class="comment">5pre)</span>
   <span class="comment">A</span> <span class="comment">Very</span> <span class="comment">High</span> <span class="comment">Performance</span> <span class="comment">Objective</span>-<span class="comment">C</span> <span class="comment">JSON</span> <span class="comment">Library</span>.
   <span class="literal">-</span> <span class="comment">Homepage:</span> <span class="comment">https://github</span>.<span class="comment">com/johnezang/JSONKit</span>
   <span class="literal">-</span> <span class="comment">Source:</span>   <span class="comment">git://github</span>.<span class="comment">com/johnezang/JSONKit</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Versions:</span> <span class="comment">1</span>.<span class="comment">5pre</span>, <span class="comment">1</span>.<span class="comment">4</span> <span class="title">[</span><span class="comment">master</span> <span class="comment">repo</span>]


<span class="literal">-</span>&gt; <span class="comment">MTJSONDictionary</span> <span class="comment">(0</span>.<span class="comment">0</span>.<span class="comment">4)</span>
   <span class="comment">An</span> <span class="comment">NSDictionary</span> <span class="comment">category</span> <span class="comment">for</span> <span class="comment">when</span> <span class="comment">you're</span> <span class="comment">working</span> <span class="comment">with</span> <span class="comment">it</span> <span class="comment">converting</span> <span class="comment">to/from</span> <span class="comment">JSON</span>. <span class="comment">DEPRECATED</span>, <span class="comment">use</span> <span class="comment">MTJSONUtils</span> <span class="comment">instead</span>.
   <span class="literal">-</span> <span class="comment">Homepage:</span> <span class="comment">https://github</span>.<span class="comment">com/mysterioustrousers/MTJSONDictionary</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Source:</span>   <span class="comment">https://github</span>.<span class="comment">com/mysterioustrousers/MTJSONDictionary</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Versions:</span> <span class="comment">0</span>.<span class="comment">0</span>.<span class="comment">4</span>, <span class="comment">0</span>.<span class="comment">0</span>.<span class="comment">3</span>, <span class="comment">0</span>.<span class="comment">0</span>.<span class="comment">2</span> <span class="title">[</span><span class="comment">master</span> <span class="comment">repo</span>]


<span class="literal">-</span>&gt; <span class="comment">MTJSONUtils</span> <span class="comment">(0</span>.<span class="comment">0</span>.<span class="comment">1)</span>
   <span class="comment">NSObject</span> <span class="comment">category</span> <span class="comment">for</span> <span class="comment">working</span> <span class="comment">JSON</span> <span class="comment">convertions</span> <span class="comment">with</span> <span class="comment">suport</span> <span class="comment">keypaths</span> <span class="comment">(</span>[<span class="comment">dict</span> <span class="comment">valueForComplexKeyPath:@"parents</span>[<span class="comment">0</span>]<span class="string">.</span><span class="comment">children</span>[<span class="comment">first</span>]<span class="string">.</span><span class="comment">toys</span>[<span class="comment">last</span>]<span class="comment">"</span>]<span class="comment">)</span>
   <span class="literal">-</span> <span class="comment">Homepage:</span> <span class="comment">https://github</span>.<span class="comment">com/mysterioustrousers/MTJSONUtils</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Source:</span>   <span class="comment">https://github</span>.<span class="comment">com/mysterioustrousers/MTJSONUtils</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Versions:</span> <span class="comment">0</span>.<span class="comment">0</span>.<span class="comment">1</span> <span class="title">[</span><span class="comment">master</span> <span class="comment">repo</span>]


<span class="literal">-</span>&gt; <span class="comment">SBJson</span> <span class="comment">(3</span>.<span class="comment">1</span>.<span class="comment">1)</span>
   <span class="comment">This</span> <span class="comment">library</span> <span class="comment">implements</span> <span class="comment">strict</span> <span class="comment">JSON</span> <span class="comment">parsing</span> <span class="comment">and</span> <span class="comment">generation</span> <span class="comment">in</span> <span class="comment">Objective</span>-<span class="comment">C</span>.
   <span class="literal">-</span> <span class="comment">Homepage:</span> <span class="comment">http://stig</span>.<span class="comment">github</span>.<span class="comment">com/json</span>-<span class="comment">framework/</span>
   <span class="literal">-</span> <span class="comment">Source:</span>   <span class="comment">https://github</span>.<span class="comment">com/stig/json</span>-<span class="comment">framework</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Versions:</span> <span class="comment">3</span>.<span class="comment">1</span>.<span class="comment">1</span>, <span class="comment">3</span>.<span class="comment">1</span>, <span class="comment">3</span>.<span class="comment">0</span>.<span class="comment">4</span>, <span class="comment">2</span>.<span class="comment">2</span>.<span class="comment">3</span> <span class="title">[</span><span class="comment">master</span> <span class="comment">repo</span>]


<span class="literal">-</span>&gt; <span class="comment">TouchJSON</span> <span class="comment">(1</span>.<span class="comment">0)</span>
   <span class="comment">TouchJSON</span> <span class="comment">is</span> <span class="comment">an</span> <span class="comment">Objective</span>-<span class="comment">C</span> <span class="comment">based</span> <span class="comment">parser</span> <span class="comment">and</span> <span class="comment">generator</span> <span class="comment">for</span> <span class="comment">JSON</span> <span class="comment">encoded</span> <span class="comment">data</span>.
   <span class="literal">-</span> <span class="comment">Homepage:</span> <span class="comment">https://github</span>.<span class="comment">com/TouchCode/TouchJSON</span>
   <span class="literal">-</span> <span class="comment">Source:</span>   <span class="comment">https://github</span>.<span class="comment">com/TouchCode/TouchJSON</span>.<span class="comment">git</span>
   <span class="literal">-</span> <span class="comment">Versions:</span> <span class="comment">1</span>.<span class="comment">0</span> <span class="title">[</span><span class="comment">master</span> <span class="comment">repo</span>]
</pre></td></tr></table></figure>

<p>恩出现很多 我们选一个自己会用的就好了。</p>
<h3>添加</h3>
<p>我们进入我们的iOS项目目录下，然后新建立一个配置文件Podfile</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">touch</span> <span class="type">Podfile</span>
<span class="title">vim</span> <span class="type">Podfile</span>
</pre></td></tr></table></figure>

<p>然后加入我们想要的第三方库和库的Version号(Podfile内容)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">platform</span> :ios
<span class="title">dependency</span><span class="string"> 'JSONKit'</span>,<span class="string"> '~&gt; 1.5pre'</span>
</pre></td></tr></table></figure>

<p>保存</p>
<p>执行  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">pod</span> install
</pre></td></tr></table></figure>

<p>完成以后<br>你在目录下可以看见一个后缀为.xcworkspace的文件(其实是一个目录，代表着xCode的workspace) 然后。以后你写项目都打开这个就好了。<br><img src="http://farm9.staticflickr.com/8185/8126953991_7164f1e696_b.jpg" alt="xcworkspace"><br>打开看以后会发现其实cocoapods做了一个事情就是他把第三方库都编译成了一个库文件。然后你的项目中去包含头文件，libPods.a被作为framework集成到目标项目。Pods.xcconfig 中配置了XCode编译的查找路径，通过这种方式将所有的第三方包来引入到项目中。</p>
<p>啊哈哈，立马感觉引入一个第三方包都变得很现代有木有。</p>
<p>如果需要加入新的库编写Podfile里面 再次执行</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">pod</span> install
</pre></td></tr></table></figure>

<p>就好了。</p>
<h3>向cocoapods提交新的第三方库</h3>
<p>如果你在pod search里面没有找到你想要的库怎么弄。cocoapods允许你自己提交，然后他们审核发布。(太人性化了，感动的想哭啊)</p>
<p>简单的说，Spec就是每个包在CocoaPods中的配置文件，其中包括Package的名字，版本号，每个版本对应的下载地址，编译时的参数。等等。</p>
<p>这是该项目的地址，<a href="https://github.com/CocoaPods/Specs，在页面上有介绍如何创新新的包，可以Fork该项目，然后通过pull" target="_blank">https://github.com/CocoaPods/Specs，在页面上有介绍如何创新新的包，可以Fork该项目，然后通过pull</a> request提交所建的新包。</p>
<p><a href="http://nsscreencast.com/episodes/28-creating-a-cocoapod" target="_blank">官方有视频教程</a></p>
<p><a href="https://github.com/CocoaPods/CocoaPods/wiki" target="_blank">wiki</a></p>
<h2>参考</h2>
<p><a href="http://josephjiang.com/entry.php?id=342" target="_blank">Git Submodule 的認識與正確使用！</a></p>
<p><a href="http://tw.polydice.com/2012/07/04/cocoapods/" target="_blank">CocoaPods：管理 Objective-C 專案裡頭各種 Library 關聯性最棒的方式</a></p>
<p><a href="http://www.cnblogs.com/dragonstreak_1/archive/2012/10/19/2730979.html" target="_blank">Use CocoaPods for Packages Management in Xcode</a></p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/iOS/">iOS</a>
  </div>

        
        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:iiiyu.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Emacs/">Emacs</a><small>3</small></li>
  
    <li><a href="/categories/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/categories/Software/">Software</a><small>2</small></li>
  
    <li><a href="/categories/iOS/">iOS</a><small>30</small></li>
  
    <li><a href="/categories/just-talk/">just-talk</a><small>13</small></li>
  
    <li><a href="/categories/read book notes/">read book notes</a><small>2</small></li>
  
  </ul>
</div>


  

  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 萧宸宇
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'iiiyu';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>